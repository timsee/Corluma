<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Corluma: commtype.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="CSS_Corluma.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Corluma
   &#160;<span id="projectnumber">v0.9.82</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">commtype.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#ifndef COMMTYPE_H</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#define COMMTYPE_H</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;QString&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;QList&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;QSettings&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;QDebug&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;QWidget&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;commthrottle.h&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;lightdevice.h&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="class_comm_type.html">   29</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_comm_type.html">CommType</a> : <span class="keyword">public</span> QWidget {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    Q_OBJECT</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="class_comm_type.html#aea9af432f13faf2a28b6a9fd5d5000e9">   35</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="class_comm_type.html#aea9af432f13faf2a28b6a9fd5d5000e9">~CommType</a>(){}</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// Virtual Functions</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#a78d309086195c52051f007e693ff2b7a">startup</a>() = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#ad2a24398eeaafa49cd376cb09be961ef">shutdown</a>() = 0;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="class_comm_type.html#ace6d7465b678fc3daf1e9580d331c8dc">   58</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_comm_type.html#ace6d7465b678fc3daf1e9580d331c8dc">hasStarted</a>() { <span class="keywordflow">return</span> <a class="code" href="class_comm_type.html#a47a3020ab06d49b995e22c7b4567017e">mHasStarted</a>; }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#af6455a9e3aaa20b95077339fa5502ea7">sendPacket</a>(QString controller, QString packet) = 0;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// Mode Management</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#a3ee085c089155c088acd4ebb4ed41b4f">startDiscovery</a>();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#ab0e83c722a3afb0c1ceda26c55c76e85">stopDiscovery</a>();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="class_comm_type.html#ab5b5c67a3a87429a342fb9e82cdcaf6d">   90</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_comm_type.html#ab5b5c67a3a87429a342fb9e82cdcaf6d">runningDiscovery</a>() { <span class="keywordflow">return</span> <a class="code" href="class_comm_type.html#afcc75099b138addb3dc35692e819eabe">mDiscoveryMode</a>; }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#ae92c228926c3214a78e12d3519102555">resetStateUpdateTimeout</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#a684c569bb57248ae4b0b2e4563339f74">stopStateUpdates</a>();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Controller and Device Management</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_comm_type.html#ac8e3ef4d4b075f7d53fcb6500c0d48e1">addController</a>(QString controller);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_comm_type.html#aac6ed7947ba8860ee31946d36d083944">removeController</a>(QString controller);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#af821394409188dff6275f2810ca799ad">updateDevice</a>(SLightDevice device);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_comm_type.html#a4d82da9a4b796ccb66d9d5c155e082e1">fillDevice</a>(SLightDevice&amp; device);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="class_comm_type.html#acb1865d11bc8e1f01a925ed68e284691">  139</a></span>&#160;    <span class="keyword">const</span> std::unordered_map&lt;std::string, std::list&lt;SLightDevice&gt; &gt;&amp; <a class="code" href="class_comm_type.html#acb1865d11bc8e1f01a925ed68e284691">deviceTable</a>() { <span class="keywordflow">return</span> <a class="code" href="class_comm_type.html#ab17df6d25cf2db9d844945d6f135e65c">mDeviceTable</a>; }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// Persistent Connection list Handling</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// Each CommType stores its own list of up to 5 possible connections</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// in its mList object. This is saved into persistent data and will</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// reload every time the program is started up.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#aaa25ac27d5bdb85a13b8d461ca1a960c">setupConnectionList</a>(ECommType type);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#acf39ac1fbdab41338549ea9010ed0f91">saveConnectionList</a>();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;signals:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#a9186f5c260b29ec24d0e1666191afbf6">packetReceived</a>(QString, QString, <span class="keywordtype">int</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#acbc434809e1145dff7f9cd3dcd7a068d">discoveryReceived</a>(QString, QString, <span class="keywordtype">int</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#ac61ed4af1b52a921138f7f97e5d15b9e">updateReceived</a>(<span class="keywordtype">int</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#adb4143fad9f0cad9b4e0efff68614bf1">resetDiscovery</a>();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_comm_type.html#a140fb846eeb4d24976e2a4f514f95f0f">shouldContinueStateUpdate</a>();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="class_comm_type.html#a93d86e18ed75c62c422d727cc4e25b8c">  198</a></span>&#160;    QTime <a class="code" href="class_comm_type.html#a93d86e18ed75c62c422d727cc4e25b8c">mLastSendTime</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_comm_type.html#a5b66737d5c7518453f138de385df52b2">handleDiscoveryPacket</a>(QString sender, <span class="keywordtype">int</span> throttleInterval, <span class="keywordtype">int</span> throttleMax);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="class_comm_type.html#ab17df6d25cf2db9d844945d6f135e65c">  218</a></span>&#160;    std::unordered_map&lt;std::string, std::list&lt;SLightDevice&gt; &gt; <a class="code" href="class_comm_type.html#ab17df6d25cf2db9d844945d6f135e65c">mDeviceTable</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="class_comm_type.html#a35f88dea2ab73337cef428d5aed5fec6">  224</a></span>&#160;    std::list&lt;std::pair&lt;QString, CommThrottle*&gt; &gt; <a class="code" href="class_comm_type.html#a35f88dea2ab73337cef428d5aed5fec6">mThrottleList</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="class_comm_type.html#aa4880167268de709a679fd25629eb397">  230</a></span>&#160;    std::list&lt;std::string&gt; <a class="code" href="class_comm_type.html#aa4880167268de709a679fd25629eb397">mUndiscoveredList</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="class_comm_type.html#a72eb17fb724feb20de438b6c304e35ba">  235</a></span>&#160;    std::list&lt;QString&gt; <a class="code" href="class_comm_type.html#a72eb17fb724feb20de438b6c304e35ba">mDiscoveryList</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="class_comm_type.html#a5fad0675d5baa960558751025bc5ec3a">  241</a></span>&#160;    QTimer *<a class="code" href="class_comm_type.html#a5fad0675d5baa960558751025bc5ec3a">mStateUpdateTimer</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="class_comm_type.html#afe98ed3a9a537c126fcebdb6ac109a09">  246</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="class_comm_type.html#afe98ed3a9a537c126fcebdb6ac109a09">mStateUpdateInterval</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="class_comm_type.html#a53ba509a1aa972b772c1c6f8f074a1cb">  251</a></span>&#160;    QTimer *<a class="code" href="class_comm_type.html#a53ba509a1aa972b772c1c6f8f074a1cb">mDiscoveryTimer</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="class_comm_type.html#aed07e124f1bb8819e0452cb2621e5629">  257</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="class_comm_type.html#aed07e124f1bb8819e0452cb2621e5629">mUpdateTimeoutInterval</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="class_comm_type.html#afcc75099b138addb3dc35692e819eabe">  263</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_comm_type.html#afcc75099b138addb3dc35692e819eabe">mDiscoveryMode</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="class_comm_type.html#a2e8ea9e88347922939c9823e0f1488ea">  270</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_comm_type.html#a2e8ea9e88347922939c9823e0f1488ea">mFullyDiscovered</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="class_comm_type.html#a47a3020ab06d49b995e22c7b4567017e">  276</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_comm_type.html#a47a3020ab06d49b995e22c7b4567017e">mHasStarted</a>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Connection List Helpers</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    QString settingsIndexKey(<span class="keywordtype">int</span> index);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    QString settingsListSizeKey();</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordtype">bool</span> checkIfControllerIsValid(QString controller);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// Connection List Variables</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    QSettings mSettings;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    ECommType mType;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;};</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">#endif // COMMTYPE_H</span></div>
<div class="ttc" id="class_comm_type_html_a5b66737d5c7518453f138de385df52b2"><div class="ttname"><a href="class_comm_type.html#a5b66737d5c7518453f138de385df52b2">CommType::handleDiscoveryPacket</a></div><div class="ttdeci">void handleDiscoveryPacket(QString sender, int throttleInterval, int throttleMax)</div><div class="ttdoc">handleDiscoveryPacket called whenever a discovery packet is received by a commtype. Although all commtypes may received a packet in different ways or in differnt formats, all ways get converted so that they work with this function. The function determines if the device sending the discovery packet has been discovered already, and if it hasn&#39;t, it adds it to its list. It also initiates a throttle timer for this particular controller. Finally, it determines if its looking for any other controllers, and if its not, it shuts off the discovery timer. </div><div class="ttdef"><b>Definition:</b> commtype.cpp:182</div></div>
<div class="ttc" id="class_comm_type_html_a3ee085c089155c088acd4ebb4ed41b4f"><div class="ttname"><a href="class_comm_type.html#a3ee085c089155c088acd4ebb4ed41b4f">CommType::startDiscovery</a></div><div class="ttdeci">void startDiscovery()</div><div class="ttdoc">startDiscovery start sending discovery packets if needed, and continually request state update packet...</div><div class="ttdef"><b>Definition:</b> commtype.cpp:34</div></div>
<div class="ttc" id="class_comm_type_html_af6455a9e3aaa20b95077339fa5502ea7"><div class="ttname"><a href="class_comm_type.html#af6455a9e3aaa20b95077339fa5502ea7">CommType::sendPacket</a></div><div class="ttdeci">virtual void sendPacket(QString controller, QString packet)=0</div><div class="ttdoc">sendPacket Sends the provided string over the connection stream. </div></div>
<div class="ttc" id="class_comm_type_html_adb4143fad9f0cad9b4e0efff68614bf1"><div class="ttname"><a href="class_comm_type.html#adb4143fad9f0cad9b4e0efff68614bf1">CommType::resetDiscovery</a></div><div class="ttdeci">void resetDiscovery()</div><div class="ttdoc">resetDiscovery clears the throttle list and discovery list and treats the commtype as if nothing has ...</div><div class="ttdef"><b>Definition:</b> commtype.cpp:151</div></div>
<div class="ttc" id="class_comm_type_html_a5fad0675d5baa960558751025bc5ec3a"><div class="ttname"><a href="class_comm_type.html#a5fad0675d5baa960558751025bc5ec3a">CommType::mStateUpdateTimer</a></div><div class="ttdeci">QTimer * mStateUpdateTimer</div><div class="ttdoc">mStateUpdateTimer Polls the controller every few seconds requesting updates on all of its devices...</div><div class="ttdef"><b>Definition:</b> commtype.h:241</div></div>
<div class="ttc" id="class_comm_type_html_ab17df6d25cf2db9d844945d6f135e65c"><div class="ttname"><a href="class_comm_type.html#ab17df6d25cf2db9d844945d6f135e65c">CommType::mDeviceTable</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::list&lt; SLightDevice &gt; &gt; mDeviceTable</div><div class="ttdoc">mDeviceTable hash table of all available devices. the hash key is the controller name and the list as...</div><div class="ttdef"><b>Definition:</b> commtype.h:218</div></div>
<div class="ttc" id="class_comm_type_html_afcc75099b138addb3dc35692e819eabe"><div class="ttname"><a href="class_comm_type.html#afcc75099b138addb3dc35692e819eabe">CommType::mDiscoveryMode</a></div><div class="ttdeci">bool mDiscoveryMode</div><div class="ttdoc">mDiscoveryMode true if all discovery and state update threads for the commtype should be active...</div><div class="ttdef"><b>Definition:</b> commtype.h:263</div></div>
<div class="ttc" id="class_comm_type_html_a93d86e18ed75c62c422d727cc4e25b8c"><div class="ttname"><a href="class_comm_type.html#a93d86e18ed75c62c422d727cc4e25b8c">CommType::mLastSendTime</a></div><div class="ttdeci">QTime mLastSendTime</div><div class="ttdoc">mLastSendTime the last time a message was sent to the commtype. This is tracked to detect when the de...</div><div class="ttdef"><b>Definition:</b> commtype.h:198</div></div>
<div class="ttc" id="class_comm_type_html_a72eb17fb724feb20de438b6c304e35ba"><div class="ttname"><a href="class_comm_type.html#a72eb17fb724feb20de438b6c304e35ba">CommType::mDiscoveryList</a></div><div class="ttdeci">std::list&lt; QString &gt; mDiscoveryList</div><div class="ttdoc">mDiscoveryList list of devices that have been discovered properly. </div><div class="ttdef"><b>Definition:</b> commtype.h:235</div></div>
<div class="ttc" id="class_comm_type_html_ac8e3ef4d4b075f7d53fcb6500c0d48e1"><div class="ttname"><a href="class_comm_type.html#ac8e3ef4d4b075f7d53fcb6500c0d48e1">CommType::addController</a></div><div class="ttdeci">bool addController(QString controller)</div><div class="ttdoc">addController attempts to add a new controller to the device table. </div><div class="ttdef"><b>Definition:</b> commtype.cpp:44</div></div>
<div class="ttc" id="class_comm_type_html_a2e8ea9e88347922939c9823e0f1488ea"><div class="ttname"><a href="class_comm_type.html#a2e8ea9e88347922939c9823e0f1488ea">CommType::mFullyDiscovered</a></div><div class="ttdeci">bool mFullyDiscovered</div><div class="ttdoc">mFullyDiscovered bool that tracks whether or not all the controllers the commtype is looking for have...</div><div class="ttdef"><b>Definition:</b> commtype.h:270</div></div>
<div class="ttc" id="class_comm_type_html_aaa25ac27d5bdb85a13b8d461ca1a960c"><div class="ttname"><a href="class_comm_type.html#aaa25ac27d5bdb85a13b8d461ca1a960c">CommType::setupConnectionList</a></div><div class="ttdeci">void setupConnectionList(ECommType type)</div><div class="ttdoc">setupConnectionList initializes the connection list and reloads it from system memory, if needed </div><div class="ttdef"><b>Definition:</b> commtype.cpp:10</div></div>
<div class="ttc" id="class_comm_type_html_aac6ed7947ba8860ee31946d36d083944"><div class="ttname"><a href="class_comm_type.html#aac6ed7947ba8860ee31946d36d083944">CommType::removeController</a></div><div class="ttdeci">bool removeController(QString controller)</div><div class="ttdoc">removeController attempts to remove the controller from the device table. </div><div class="ttdef"><b>Definition:</b> commtype.cpp:60</div></div>
<div class="ttc" id="class_comm_type_html_ad2a24398eeaafa49cd376cb09be961ef"><div class="ttname"><a href="class_comm_type.html#ad2a24398eeaafa49cd376cb09be961ef">CommType::shutdown</a></div><div class="ttdeci">virtual void shutdown()=0</div><div class="ttdoc">shutdown turns off all threads that maintain the connection and check for changes. Also shuts down any discovery threads, if they are currently running. </div></div>
<div class="ttc" id="class_comm_type_html_a9186f5c260b29ec24d0e1666191afbf6"><div class="ttname"><a href="class_comm_type.html#a9186f5c260b29ec24d0e1666191afbf6">CommType::packetReceived</a></div><div class="ttdeci">void packetReceived(QString, QString, int)</div><div class="ttdoc">packetReceived emitted whenever a packet that is not a discovery packet is received. Contains the full packet&#39;s contents as a QString. </div></div>
<div class="ttc" id="class_comm_type_html_a684c569bb57248ae4b0b2e4563339f74"><div class="ttname"><a href="class_comm_type.html#a684c569bb57248ae4b0b2e4563339f74">CommType::stopStateUpdates</a></div><div class="ttdeci">void stopStateUpdates()</div><div class="ttdoc">stopStateUpdates turn off the state update timers. </div><div class="ttdef"><b>Definition:</b> commtype.cpp:167</div></div>
<div class="ttc" id="class_comm_type_html_af821394409188dff6275f2810ca799ad"><div class="ttname"><a href="class_comm_type.html#af821394409188dff6275f2810ca799ad">CommType::updateDevice</a></div><div class="ttdeci">void updateDevice(SLightDevice device)</div><div class="ttdoc">updateDevice update all the data in the light device that matches the same controller and index...</div><div class="ttdef"><b>Definition:</b> commtype.cpp:66</div></div>
<div class="ttc" id="class_comm_type_html_ab0e83c722a3afb0c1ceda26c55c76e85"><div class="ttname"><a href="class_comm_type.html#ab0e83c722a3afb0c1ceda26c55c76e85">CommType::stopDiscovery</a></div><div class="ttdeci">void stopDiscovery()</div><div class="ttdoc">stopDiscovery stop sending discovery packets and go back to requesting state update packets only when...</div><div class="ttdef"><b>Definition:</b> commtype.cpp:40</div></div>
<div class="ttc" id="class_comm_type_html_aa4880167268de709a679fd25629eb397"><div class="ttname"><a href="class_comm_type.html#aa4880167268de709a679fd25629eb397">CommType::mUndiscoveredList</a></div><div class="ttdeci">std::list&lt; std::string &gt; mUndiscoveredList</div><div class="ttdoc">mUndiscoveredList list of controllers that are not currently discovered but are running discovery rou...</div><div class="ttdef"><b>Definition:</b> commtype.h:230</div></div>
<div class="ttc" id="class_comm_type_html_a53ba509a1aa972b772c1c6f8f074a1cb"><div class="ttname"><a href="class_comm_type.html#a53ba509a1aa972b772c1c6f8f074a1cb">CommType::mDiscoveryTimer</a></div><div class="ttdeci">QTimer * mDiscoveryTimer</div><div class="ttdoc">mDiscoveryTimer used during discovery to poll the device every few seconds. </div><div class="ttdef"><b>Definition:</b> commtype.h:251</div></div>
<div class="ttc" id="class_comm_type_html_aed07e124f1bb8819e0452cb2621e5629"><div class="ttname"><a href="class_comm_type.html#aed07e124f1bb8819e0452cb2621e5629">CommType::mUpdateTimeoutInterval</a></div><div class="ttdeci">int mUpdateTimeoutInterval</div><div class="ttdoc">mUpdateTimeoutInterval number of msec that it takes the state update timer to time out and stop sendi...</div><div class="ttdef"><b>Definition:</b> commtype.h:257</div></div>
<div class="ttc" id="class_comm_type_html_a140fb846eeb4d24976e2a4f514f95f0f"><div class="ttname"><a href="class_comm_type.html#a140fb846eeb4d24976e2a4f514f95f0f">CommType::shouldContinueStateUpdate</a></div><div class="ttdeci">bool shouldContinueStateUpdate()</div><div class="ttdoc">shouldContinueStateUpdate checks internal states and determines if it should still keep requesting st...</div><div class="ttdef"><b>Definition:</b> commtype.cpp:173</div></div>
<div class="ttc" id="class_comm_type_html_afe98ed3a9a537c126fcebdb6ac109a09"><div class="ttname"><a href="class_comm_type.html#afe98ed3a9a537c126fcebdb6ac109a09">CommType::mStateUpdateInterval</a></div><div class="ttdeci">int mStateUpdateInterval</div><div class="ttdoc">mStateUpdateInterval number of msec between each state update request. </div><div class="ttdef"><b>Definition:</b> commtype.h:246</div></div>
<div class="ttc" id="class_comm_type_html_a35f88dea2ab73337cef428d5aed5fec6"><div class="ttname"><a href="class_comm_type.html#a35f88dea2ab73337cef428d5aed5fec6">CommType::mThrottleList</a></div><div class="ttdeci">std::list&lt; std::pair&lt; QString, CommThrottle * &gt; &gt; mThrottleList</div><div class="ttdoc">mThrottleList list of throttles paired with strings. This allows each different discovered device to ...</div><div class="ttdef"><b>Definition:</b> commtype.h:224</div></div>
<div class="ttc" id="class_comm_type_html_a78d309086195c52051f007e693ff2b7a"><div class="ttname"><a href="class_comm_type.html#a78d309086195c52051f007e693ff2b7a">CommType::startup</a></div><div class="ttdeci">virtual void startup()=0</div><div class="ttdoc">startup Each comm type has a series of threads that maintain the connection and check for changes...</div></div>
<div class="ttc" id="class_comm_type_html_acb1865d11bc8e1f01a925ed68e284691"><div class="ttname"><a href="class_comm_type.html#acb1865d11bc8e1f01a925ed68e284691">CommType::deviceTable</a></div><div class="ttdeci">const std::unordered_map&lt; std::string, std::list&lt; SLightDevice &gt; &gt; &amp; deviceTable()</div><div class="ttdoc">deviceList list of the light devices </div><div class="ttdef"><b>Definition:</b> commtype.h:139</div></div>
<div class="ttc" id="class_comm_type_html_aea9af432f13faf2a28b6a9fd5d5000e9"><div class="ttname"><a href="class_comm_type.html#aea9af432f13faf2a28b6a9fd5d5000e9">CommType::~CommType</a></div><div class="ttdeci">virtual ~CommType()</div><div class="ttdoc">~CommType Deconstructor </div><div class="ttdef"><b>Definition:</b> commtype.h:35</div></div>
<div class="ttc" id="class_comm_type_html_acf39ac1fbdab41338549ea9010ed0f91"><div class="ttname"><a href="class_comm_type.html#acf39ac1fbdab41338549ea9010ed0f91">CommType::saveConnectionList</a></div><div class="ttdeci">void saveConnectionList()</div><div class="ttdoc">saveConnectionList must be called by deconstructors, saves the connection list to the app&#39;s persisten...</div><div class="ttdef"><b>Definition:</b> commtype.cpp:129</div></div>
<div class="ttc" id="class_comm_type_html"><div class="ttname"><a href="class_comm_type.html">CommType</a></div><div class="ttdoc">inherited by comm types, provides a general interface that can be used to do connections and sending ...</div><div class="ttdef"><b>Definition:</b> commtype.h:29</div></div>
<div class="ttc" id="class_comm_type_html_ae92c228926c3214a78e12d3519102555"><div class="ttname"><a href="class_comm_type.html#ae92c228926c3214a78e12d3519102555">CommType::resetStateUpdateTimeout</a></div><div class="ttdeci">void resetStateUpdateTimeout()</div><div class="ttdoc">resetStateUpdateTimeout reset the timer tracking when to shutdown the state update thread...</div><div class="ttdef"><b>Definition:</b> commtype.cpp:160</div></div>
<div class="ttc" id="class_comm_type_html_a47a3020ab06d49b995e22c7b4567017e"><div class="ttname"><a href="class_comm_type.html#a47a3020ab06d49b995e22c7b4567017e">CommType::mHasStarted</a></div><div class="ttdeci">bool mHasStarted</div><div class="ttdoc">mHasStarted bool that tracks whether or not the startup() routine has been called. Gets set to false after the shutdown() routine is callsed. </div><div class="ttdef"><b>Definition:</b> commtype.h:276</div></div>
<div class="ttc" id="class_comm_type_html_ab5b5c67a3a87429a342fb9e82cdcaf6d"><div class="ttname"><a href="class_comm_type.html#ab5b5c67a3a87429a342fb9e82cdcaf6d">CommType::runningDiscovery</a></div><div class="ttdeci">bool runningDiscovery()</div><div class="ttdoc">runningDiscovery true if theres any controller that is going through the discovery routines and hasn&#39;...</div><div class="ttdef"><b>Definition:</b> commtype.h:90</div></div>
<div class="ttc" id="class_comm_type_html_a4d82da9a4b796ccb66d9d5c155e082e1"><div class="ttname"><a href="class_comm_type.html#a4d82da9a4b796ccb66d9d5c155e082e1">CommType::fillDevice</a></div><div class="ttdeci">bool fillDevice(SLightDevice &amp;device)</div><div class="ttdoc">fillDevice takes the controller and index of the referenced SLightDevice and overwrites all other val...</div><div class="ttdef"><b>Definition:</b> commtype.cpp:97</div></div>
<div class="ttc" id="class_comm_type_html_acbc434809e1145dff7f9cd3dcd7a068d"><div class="ttname"><a href="class_comm_type.html#acbc434809e1145dff7f9cd3dcd7a068d">CommType::discoveryReceived</a></div><div class="ttdeci">void discoveryReceived(QString, QString, int)</div><div class="ttdoc">discoveryReceived emitted when a discovery packet is received, this contains the state of all connect...</div></div>
<div class="ttc" id="class_comm_type_html_ac61ed4af1b52a921138f7f97e5d15b9e"><div class="ttname"><a href="class_comm_type.html#ac61ed4af1b52a921138f7f97e5d15b9e">CommType::updateReceived</a></div><div class="ttdeci">void updateReceived(int)</div><div class="ttdoc">updateReceived an update packet was received from any controller. </div></div>
<div class="ttc" id="class_comm_type_html_ace6d7465b678fc3daf1e9580d331c8dc"><div class="ttname"><a href="class_comm_type.html#ace6d7465b678fc3daf1e9580d331c8dc">CommType::hasStarted</a></div><div class="ttdeci">bool hasStarted()</div><div class="ttdoc">hasStarted true if startup has been called and a shutdown has not be called after it...</div><div class="ttdef"><b>Definition:</b> commtype.h:58</div></div>
</div><!-- fragment --></div><!-- contents -->

<hr>
<table style="width:100%">
  <tr>
    <td>
      <p align="left">
      <small>
          &nbsp; &nbsp; LightingGUI Copyright 2015 - 2017  &nbsp; &nbsp; <br>
          &nbsp; &nbsp; All Rights MIT Licensed.  &nbsp; &nbsp; 
       </small>
       </p>
    </td>
    <td>
      <p align="right">
      <small>
          &nbsp; &nbsp;  Generated by doxygen 1.8.11  &nbsp; &nbsp;
       </small>
       </p>
    </td>
  </tr>
</table>
